services:
  agent:
    build: .
    ports:
      - "8000:8000"
    env_file:
      - .env
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - OPENAI_MODEL=${OPENAI_MODEL:-gpt-4o}
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - GIT_AUTHOR_NAME=${GIT_AUTHOR_NAME:-codex-agent}
      - GIT_AUTHOR_EMAIL=${GIT_AUTHOR_EMAIL:-codex-agent@example.com}
      - MAX_REPO_SIZE_MB=${MAX_REPO_SIZE_MB:-500}
      - CLONE_TIMEOUT=${CLONE_TIMEOUT:-120}
      - OPENCODE_TIMEOUT=${OPENCODE_TIMEOUT:-600}
      - GIT_PUSH_TIMEOUT=${GIT_PUSH_TIMEOUT:-120}
    restart: unless-stopped
